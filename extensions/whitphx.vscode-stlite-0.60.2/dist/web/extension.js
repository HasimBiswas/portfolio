(()=>{var e={2294:e=>{"use strict";function t(e,t,i){e instanceof RegExp&&(e=n(e,i)),t instanceof RegExp&&(t=n(t,i));var r=s(e,t,i);return r&&{start:r[0],end:r[1],pre:i.slice(0,r[0]),body:i.slice(r[0]+e.length,r[1]),post:i.slice(r[1]+t.length)}}function n(e,t){var n=t.match(e);return n?n[0]:null}function s(e,t,n){var s,i,r,o,a,l=n.indexOf(e),c=n.indexOf(t,l+1),h=l;if(l>=0&&c>0){if(e===t)return[l,c];for(s=[],r=n.length;h>=0&&!a;)h==l?(s.push(h),l=n.indexOf(e,h+1)):1==s.length?a=[s.pop(),c]:((i=s.pop())<r&&(r=i,o=c),c=n.indexOf(t,h+1)),h=l<c&&l>=0?l:c;s.length&&(a=[r,o])}return a}e.exports=t,t.range=s},402:(e,t,n)=>{var s=n(2294);e.exports=function(e){return e?("{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2)),m(function(e){return e.split("\\\\").join(i).split("\\{").join(r).split("\\}").join(o).split("\\,").join(a).split("\\.").join(l)}(e),!0).map(h)):[]};var i="\0SLASH"+Math.random()+"\0",r="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function c(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function h(e){return e.split(i).join("\\").split(r).join("{").split(o).join("}").split(a).join(",").split(l).join(".")}function p(e){if(!e)return[""];var t=[],n=s("{","}",e);if(!n)return e.split(",");var i=n.pre,r=n.body,o=n.post,a=i.split(",");a[a.length-1]+="{"+r+"}";var l=p(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),t.push.apply(t,a),t}function u(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function d(e,t){return e<=t}function g(e,t){return e>=t}function m(e,t){var n=[],i=s("{","}",e);if(!i)return[e];var r=i.pre,a=i.post.length?m(i.post,!1):[""];if(/\$$/.test(i.pre))for(var l=0;l<a.length;l++){var h=r+"{"+i.body+"}"+a[l];n.push(h)}else{var b,v,w=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),x=w||y,O=i.body.indexOf(",")>=0;if(!x&&!O)return i.post.match(/,.*\}/)?m(e=i.pre+"{"+i.body+o+i.post):[e];if(x)b=i.body.split(/\.\./);else if(1===(b=p(i.body)).length&&1===(b=m(b[0],!1).map(u)).length)return a.map((function(e){return i.pre+b[0]+e}));if(x){var A=c(b[0]),C=c(b[1]),P=Math.max(b[0].length,b[1].length),S=3==b.length?Math.abs(c(b[2])):1,T=d;C<A&&(S*=-1,T=g);var M=b.some(f);v=[];for(var j=A;T(j,C);j+=S){var E;if(y)"\\"===(E=String.fromCharCode(j))&&(E="");else if(E=String(j),M){var L=P-E.length;if(L>0){var k=new Array(L+1).join("0");E=j<0?"-"+k+E.slice(1):k+E}}v.push(E)}}else{v=[];for(var R=0;R<b.length;R++)v.push.apply(v,m(b[R],!1))}for(R=0;R<v.length;R++)for(l=0;l<a.length;l++)h=r+v[R]+a[l],(!t||x||h)&&n.push(h)}return n}},1023:(e,t,n)=>{"use strict";var s=n(4406);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var n,s="",i=0,r=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(r===a-1||1===o);else if(r!==a-1&&2===o){if(s.length<2||2!==i||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(s.length>2){var l=s.lastIndexOf("/");if(l!==s.length-1){-1===l?(s="",i=0):i=(s=s.slice(0,l)).length-1-s.lastIndexOf("/"),r=a,o=0;continue}}else if(2===s.length||1===s.length){s="",i=0,r=a,o=0;continue}t&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+e.slice(r+1,a):s=e.slice(r+1,a),i=a-r-1;r=a,o=0}else 46===n&&-1!==o?++o:o=-1}return s}var o={resolve:function(){for(var e,t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=s.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=r(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":o.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=o.resolve(e))===(t=o.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var s=e.length,r=s-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,c=r<l?r:l,h=-1,p=0;p<=c;++p){if(p===c){if(l>c){if(47===t.charCodeAt(a+p))return t.slice(a+p+1);if(0===p)return t.slice(a+p)}else r>c&&(47===e.charCodeAt(n+p)?h=p:0===p&&(h=0));break}var u=e.charCodeAt(n+p);if(u!==t.charCodeAt(a+p))break;47===u&&(h=p)}var f="";for(p=n+h+1;p<=s;++p)p!==s&&47!==e.charCodeAt(p)||(0===f.length?f+="..":f+="/..");return f.length>0?f+t.slice(a+h):(a+=h,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,s=-1,r=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!r){s=o;break}}else r=!1;return-1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,s=0,r=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!o){s=n+1;break}}else-1===l&&(o=!1,l=n+1),a>=0&&(c===t.charCodeAt(a)?-1==--a&&(r=n):(a=-1,r=l))}return s===r?r=l:-1===r&&(r=e.length),e.slice(s,r)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){s=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(s,r)},extname:function(e){i(e);for(var t=-1,n=0,s=-1,r=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===s&&(r=!1,s=a+1),46===l?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=a+1;break}}return-1===t||-1===s||0===o||1===o&&t===s-1&&t===n+1?"":e.slice(t,s)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+s:n+"/"+s:s}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,s=e.charCodeAt(0),r=47===s;r?(t.root="/",n=1):n=0;for(var o=-1,a=0,l=-1,c=!0,h=e.length-1,p=0;h>=n;--h)if(47!==(s=e.charCodeAt(h)))-1===l&&(c=!1,l=h+1),46===s?-1===o?o=h:1!==p&&(p=1):-1!==o&&(p=-1);else if(!c){a=h+1;break}return-1===o||-1===l||0===p||1===p&&o===l-1&&o===a+1?-1!==l&&(t.base=t.name=0===a&&r?e.slice(1,l):e.slice(a,l)):(0===a&&r?(t.name=e.slice(1,o),t.base=e.slice(1,l)):(t.name=e.slice(a,o),t.base=e.slice(a,l)),t.ext=e.slice(o,l)),a>0?t.dir=e.slice(0,a-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o},4406:e=>{var t,n,s=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var a,l=[],c=!1,h=-1;function p(){c&&a&&(c=!1,a.length?l=a.concat(l):h=-1,l.length&&u())}function u(){if(!c){var e=o(p);c=!0;for(var t=l.length;t;){for(a=l,l=[];++h<t;)a&&a[h].run();h=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function d(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||c||o(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=d,s.addListener=d,s.once=d,s.off=d,s.removeListener=d,s.removeAllListeners=d,s.emit=d,s.prependListener=d,s.prependOnceListener=d,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},5645:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PromiseDelegate:()=>a,parseRequirementsTxt:()=>o,validateRequirements:()=>i});const s=new RegExp("[[(<=>!~;@]");function i(e){return e.forEach((e=>{let t;try{t=new URL(e)}catch(e){return}if("emfs:"===t.protocol||"file:"===t.protocol)throw new Error(`"emfs:" and "file:" protocols are not allowed for the requirement (${e})`)})),e.filter((e=>{const t="streamlit"===function(e){return e.split(s)[0].trim()}(e);return!t||(console.warn(`Streamlit is specified in the requirements ("${e}"), but it will be ignored. A built-in version of Streamlit will be used.`),!1)}))}const r=/\s#.*$/;function o(e){return e.split("\n").filter((e=>!e.startsWith("#"))).map((e=>e.replace(r,""))).map((e=>e.trim())).filter((e=>""!==e))}class a{constructor(){this.promise=new Promise(((e,t)=>{this.resolveInternal=e,this.rejectInternal=t}))}resolve(e){this.resolveInternal(e)}reject(e){this.rejectInternal(e)}}},9496:e=>{"use strict";e.exports=require("vscode")},9929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseClass=void 0;const n={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},s=e=>e.replace(/[[\]\\-]/g,"\\$&"),i=e=>e.join("");t.parseClass=(e,t)=>{const r=t;if("["!==e.charAt(r))throw new Error("not in a brace expression");const o=[],a=[];let l=r+1,c=!1,h=!1,p=!1,u=!1,f=r,d="";e:for(;l<e.length;){const t=e.charAt(l);if("!"!==t&&"^"!==t||l!==r+1){if("]"===t&&c&&!p){f=l+1;break}if(c=!0,"\\"!==t||p){if("["===t&&!p)for(const[t,[s,i,c]]of Object.entries(n))if(e.startsWith(t,l)){if(d)return["$.",!1,e.length-r,!0];l+=t.length,c?a.push(s):o.push(s),h=h||i;continue e}p=!1,d?(t>d?o.push(s(d)+"-"+s(t)):t===d&&o.push(s(t)),d="",l++):e.startsWith("-]",l+1)?(o.push(s(t+"-")),l+=2):e.startsWith("-",l+1)?(d=t,l+=2):(o.push(s(t)),l++)}else p=!0,l++}else u=!0,l++}if(f<l)return["",!1,0,!1];if(!o.length&&!a.length)return["$.",!1,e.length-r,!0];if(0===a.length&&1===o.length&&/^\\?.$/.test(o[0])&&!u){return[(g=2===o[0].length?o[0].slice(-1):o[0],g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,f-r,!1]}var g;const m="["+(u?"^":"")+i(o)+"]",b="["+(u?"":"^")+i(a)+"]";return[o.length&&a.length?"("+m+"|"+b+")":o.length?m:b,h,f-r,!0]}},4820:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escape=void 0,t.escape=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&")},6194:function(e,t,n){"use strict";const s=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(8457));e.exports=Object.assign(s.default,{default:s.default,minimatch:s.default})},8457:function(e,t,n){"use strict";var s=n(4406),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=t.escape=t.Minimatch=t.match=t.makeRe=t.braceExpand=t.defaults=t.filter=t.GLOBSTAR=t.sep=t.minimatch=void 0;const r=i(n(402)),o=n(9929),a=n(4820),l=n(4023);t.minimatch=(e,t,n={})=>(N(t),!(!n.nocomment&&"#"===t.charAt(0))&&new z(t,n).match(e)),t.default=t.minimatch;const c=/^\*+([^+@!?\*\[\(]*)$/,h=e=>t=>!t.startsWith(".")&&t.endsWith(e),p=e=>t=>t.endsWith(e),u=e=>(e=e.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)),f=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),d=/^\*+\.\*+$/,g=e=>!e.startsWith(".")&&e.includes("."),m=e=>"."!==e&&".."!==e&&e.includes("."),b=/^\.\*+$/,v=e=>"."!==e&&".."!==e&&e.startsWith("."),w=/^\*+$/,y=e=>0!==e.length&&!e.startsWith("."),x=e=>0!==e.length&&"."!==e&&".."!==e,O=/^\?+([^+@!?\*\[\(]*)?$/,A=([e,t=""])=>{const n=T([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},C=([e,t=""])=>{const n=M([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},P=([e,t=""])=>{const n=M([e]);return t?e=>n(e)&&e.endsWith(t):n},S=([e,t=""])=>{const n=T([e]);return t?e=>n(e)&&e.endsWith(t):n},T=([e])=>{const t=e.length;return e=>e.length===t&&!e.startsWith(".")},M=([e])=>{const t=e.length;return e=>e.length===t&&"."!==e&&".."!==e},j="object"==typeof s&&s?"object"==typeof s.env&&s.env&&s.env.__MINIMATCH_TESTING_PLATFORM__||s.platform:"posix";t.sep="win32"===j?"\\":"/",t.minimatch.sep=t.sep,t.GLOBSTAR=Symbol("globstar **"),t.minimatch.GLOBSTAR=t.GLOBSTAR;const E={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},L="[^/]",k=L+"*?",R=e=>e.split("").reduce(((e,t)=>(e[t]=!0,e)),{}),_=R("().*{}+?[]^$\\!"),$=R("[.(");t.filter=(e,n={})=>s=>(0,t.minimatch)(s,e,n),t.minimatch.filter=t.filter;const W=(e,t={})=>Object.assign({},e,t);t.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return t.minimatch;const n=t.minimatch;return Object.assign(((t,s,i={})=>n(t,s,W(e,i))),{Minimatch:class extends n.Minimatch{constructor(t,n={}){super(t,W(e,n))}static defaults(t){return n.defaults(W(e,t)).Minimatch}},unescape:(t,s={})=>n.unescape(t,W(e,s)),escape:(t,s={})=>n.escape(t,W(e,s)),filter:(t,s={})=>n.filter(t,W(e,s)),defaults:t=>n.defaults(W(e,t)),makeRe:(t,s={})=>n.makeRe(t,W(e,s)),braceExpand:(t,s={})=>n.braceExpand(t,W(e,s)),match:(t,s,i={})=>n.match(t,s,W(e,i)),sep:n.sep,GLOBSTAR:t.GLOBSTAR})},t.minimatch.defaults=t.defaults,t.braceExpand=(e,t={})=>(N(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:(0,r.default)(e)),t.minimatch.braceExpand=t.braceExpand;const N=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")};t.makeRe=(e,t={})=>new z(e,t).makeRe(),t.minimatch.makeRe=t.makeRe,t.match=(e,t,n={})=>{const s=new z(t,n);return e=e.filter((e=>s.match(e))),s.options.nonull&&!e.length&&e.push(t),e},t.minimatch.match=t.match;const B=/[?*]|[+@!]\(.*?\)|\[|\]/,G=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class z{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){N(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||j,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==t.windowsNoMagicRoot?t.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if("string"!=typeof t)return!0;return!1}debug(...e){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,this.globSet);const n=this.globSet.map((e=>this.slashSplit(e)));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let s=this.globParts.map(((e,t,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){const t=!(""!==e[0]||""!==e[1]||"?"!==e[2]&&B.test(e[2])||B.test(e[3])),n=/^[a-z]:/i.test(e[0]);if(t)return[...e.slice(0,4),...e.slice(4).map((e=>this.parse(e)))];if(n)return[e[0],...e.slice(1).map((e=>this.parse(e)))]}return e.map((e=>this.parse(e)))}));if(this.debug(this.pattern,s),this.set=s.filter((e=>-1===e.indexOf(!1))),this.isWindows)for(let e=0;e<this.set.length;e++){const t=this.set[e];""===t[0]&&""===t[1]&&"?"===this.globParts[e][2]&&"string"==typeof t[3]&&/^[a-z]:$/i.test(t[3])&&(t[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)"**"===e[t][n]&&(e[t][n]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map((e=>{let t=-1;for(;-1!==(t=e.indexOf("**",t+1));){let n=t;for(;"**"===e[n+1];)n++;n!==t&&e.splice(t,n-t)}return e}))}levelOneOptimize(e){return e.map((e=>0===(e=e.reduce(((e,t)=>{const n=e[e.length-1];return"**"===t&&"**"===n?e:".."===t&&n&&".."!==n&&"."!==n&&"**"!==n?(e.pop(),e):(e.push(t),e)}),[])).length?[""]:e))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){const s=e[n];1===n&&""===s&&""===e[0]||"."!==s&&""!==s||(t=!0,e.splice(n,1),n--)}"."!==e[0]||2!==e.length||"."!==e[1]&&""!==e[1]||(t=!0,e.pop())}let n=0;for(;-1!==(n=e.indexOf("..",n+1));){const s=e[n-1];s&&"."!==s&&".."!==s&&"**"!==s&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return 0===e.length?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let s=-1;for(;-1!==(s=n.indexOf("**",s+1));){let i=s;for(;"**"===n[i+1];)i++;i>s&&n.splice(s+1,i-s);let r=n[s+1];const o=n[s+2],a=n[s+3];if(".."!==r)continue;if(!o||"."===o||".."===o||!a||"."===a||".."===a)continue;t=!0,n.splice(s,1);const l=n.slice(0);l[s]="**",e.push(l),s--}if(!this.preserveMultipleSlashes){for(let e=1;e<n.length-1;e++){const s=n[e];1===e&&""===s&&""===n[0]||"."!==s&&""!==s||(t=!0,n.splice(e,1),e--)}"."!==n[0]||2!==n.length||"."!==n[1]&&""!==n[1]||(t=!0,n.pop())}let i=0;for(;-1!==(i=n.indexOf("..",i+1));){const e=n[i-1];if(e&&"."!==e&&".."!==e&&"**"!==e){t=!0;const e=1===i&&"**"===n[i+1]?["."]:[];n.splice(i-1,2,...e),0===n.length&&n.push(""),i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){const s=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);s&&(e[t]=s,e[n]=[])}return e.filter((e=>e.length))}partsMatch(e,t,n=!1){let s=0,i=0,r=[],o="";for(;s<e.length&&i<t.length;)if(e[s]===t[i])r.push("b"===o?t[i]:e[s]),s++,i++;else if(n&&"**"===e[s]&&t[i]===e[s+1])r.push(e[s]),s++;else if(n&&"**"===t[i]&&e[s]===t[i+1])r.push(t[i]),i++;else if("*"!==e[s]||!t[i]||!this.options.dot&&t[i].startsWith(".")||"**"===t[i]){if("*"!==t[i]||!e[s]||!this.options.dot&&e[s].startsWith(".")||"**"===e[s])return!1;if("a"===o)return!1;o="b",r.push(t[i]),s++,i++}else{if("b"===o)return!1;o="a",r.push(e[s]),s++,i++}return e.length===t.length&&r}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,n=0;for(let s=0;s<e.length&&"!"===e.charAt(s);s++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,n,s=!1){const i=this.options;if(this.isWindows){const t=""===e[0]&&""===e[1]&&"?"===e[2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3]),s=""===n[0]&&""===n[1]&&"?"===n[2]&&"string"==typeof n[3]&&/^[a-z]:$/i.test(n[3]);if(t&&s){const t=e[3],s=n[3];t.toLowerCase()===s.toLowerCase()&&(e[3]=s)}else if(s&&"string"==typeof e[0]){const t=n[3],s=e[0];t.toLowerCase()===s.toLowerCase()&&(n[3]=s,n=n.slice(3))}else if(t&&"string"==typeof n[0]){const t=e[3];t.toLowerCase()===n[0].toLowerCase()&&(n[0]=t,e=e.slice(3))}}const{optimizationLevel:r=1}=this.options;r>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var o=0,a=0,l=e.length,c=n.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var h=n[a],p=e[o];if(this.debug(n,h,p),!1===h)return!1;if(h===t.GLOBSTAR){this.debug("GLOBSTAR",[n,h,p]);var u=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if("."===e[o]||".."===e[o]||!i.dot&&"."===e[o].charAt(0))return!1;return!0}for(;u<l;){var d=e[u];if(this.debug("\nglobstar while",e,u,n,f,d),this.matchOne(e.slice(u),n.slice(f),s))return this.debug("globstar found match!",u,l,d),!0;if("."===d||".."===d||!i.dot&&"."===d.charAt(0)){this.debug("dot detected!",e,u,n,f);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!s||(this.debug("\n>>> no match, partial?",e,u,n,f),u!==l))}let r;if("string"==typeof h?(r=p===h,this.debug("string match",h,p,r)):(r=h.test(p),this.debug("pattern match",h,p,r)),!r)return!1}if(o===l&&a===c)return!0;if(o===l)return s;if(a===c)return o===l-1&&""===e[o];throw new Error("wtf?")}braceExpand(){return(0,t.braceExpand)(this.pattern,this.options)}parse(e){N(e);const n=this.options;if("**"===e)return t.GLOBSTAR;if(""===e)return"";let s,i=null;(s=e.match(w))?i=n.dot?x:y:(s=e.match(c))?i=(n.nocase?n.dot?f:u:n.dot?p:h)(s[1]):(s=e.match(O))?i=(n.nocase?n.dot?C:A:n.dot?P:S)(s):(s=e.match(d))?i=n.dot?m:g:(s=e.match(b))&&(i=v);let r="",a=!1,l=!1;const T=[],M=[];let j,R=!1,W=!1,B="."===e.charAt(0),z=n.dot||B;const D=e=>"."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",I=()=>{if(R){switch(R){case"*":r+=k,a=!0;break;case"?":r+=L,a=!0;break;default:r+="\\"+R}this.debug("clearStateChar %j %j",R,r),R=!1}};for(let t,s=0;s<e.length&&(t=e.charAt(s));s++)if(this.debug("%s\t%s %s %j",e,s,r,t),l){if("/"===t)return!1;_[t]&&(r+="\\"),r+=t,l=!1}else switch(t){case"/":return!1;case"\\":I(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,s,r,t),this.debug("call clearStateChar %j",R),I(),R=t,n.noext&&I();continue;case"(":{if(!R){r+="\\(";continue}const t={type:R,start:s-1,reStart:r.length,open:E[R].open,close:E[R].close};this.debug(this.pattern,"\t",t),T.push(t),r+=t.open,0===t.start&&"!"!==t.type&&(B=!0,r+=D(e.slice(s+1))),this.debug("plType %j %j",R,r),R=!1;continue}case")":{const e=T[T.length-1];if(!e){r+="\\)";continue}T.pop(),I(),a=!0,j=e,r+=j.close,"!"===j.type&&M.push(Object.assign(j,{reEnd:r.length}));continue}case"|":{const t=T[T.length-1];if(!t){r+="\\|";continue}I(),r+="|",0===t.start&&"!"!==t.type&&(B=!0,r+=D(e.slice(s+1)));continue}case"[":I();const[i,c,h,p]=(0,o.parseClass)(e,s);h?(r+=i,W=W||c,s+=h-1,a=a||p):r+="\\[";continue;case"]":r+="\\"+t;continue;default:I(),r+=G(t)}for(j=T.pop();j;j=T.pop()){let e;e=r.slice(j.reStart+j.open.length),this.debug(this.pattern,"setting tail",r,j),e=e.replace(/((?:\\{2}){0,64})(\\?)\|/g,((e,t,n)=>(n||(n="\\"),t+t+n+"|"))),this.debug("tail=%j\n   %s",e,e,j,r);const t="*"===j.type?k:"?"===j.type?L:"\\"+j.type;a=!0,r=r.slice(0,j.reStart)+t+"\\("+e}I(),l&&(r+="\\\\");const q=$[r.charAt(0)];for(let e=M.length-1;e>-1;e--){const t=M[e],n=r.slice(0,t.reStart),s=r.slice(t.reStart,t.reEnd-8);let i=r.slice(t.reEnd);const o=r.slice(t.reEnd-8,t.reEnd)+i,a=n.split(")").length,l=n.split("(").length-a;let c=i;for(let e=0;e<l;e++)c=c.replace(/\)[+*?]?/,"");i=c,r=n+s+i+(""===i?"(?:$|\\/)":"")+o}if(""!==r&&a&&(r="(?=.)"+r),q&&(r=(B?"":z?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+r),!n.nocase||a||n.nocaseMagicOnly||(a=e.toUpperCase()!==e.toLowerCase()),!a)return r.replace(/\\(.)/g,"$1");const F=(n.nocase?"i":"")+(W?"u":"");try{const t=i?{_glob:e,_src:r,test:i}:{_glob:e,_src:r};return Object.assign(new RegExp("^"+r+"$",F),t)}catch(e){return this.debug("invalid regexp",e),new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const n=this.options,s=n.noglobstar?k:n.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=n.nocase?"i":"";let r=e.map((e=>{const n=e.map((e=>"string"==typeof e?G(e):e===t.GLOBSTAR?t.GLOBSTAR:e._src));return n.forEach(((e,i)=>{const r=n[i+1],o=n[i-1];e===t.GLOBSTAR&&o!==t.GLOBSTAR&&(void 0===o?void 0!==r&&r!==t.GLOBSTAR?n[i+1]="(?:\\/|"+s+"\\/)?"+r:n[i]=s:void 0===r?n[i-1]=o+"(?:\\/|"+s+")?":r!==t.GLOBSTAR&&(n[i-1]=o+"(?:\\/|\\/"+s+"\\/)"+r,n[i+1]=t.GLOBSTAR))})),n.filter((e=>e!==t.GLOBSTAR)).join("/")})).join("|");r="^(?:"+r+")$",this.negate&&(r="^(?!"+r+").*$");try{this.regexp=new RegExp(r,i)}catch(e){this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const n=this.options;this.isWindows&&(e=e.split("\\").join("/"));const s=this.slashSplit(e);this.debug(this.pattern,"split",s);const i=this.set;this.debug(this.pattern,"set",i);let r=s[s.length-1];if(!r)for(let e=s.length-2;!r&&e>=0;e--)r=s[e];for(let e=0;e<i.length;e++){const o=i[e];let a=s;if(n.matchBase&&1===o.length&&(a=[r]),this.matchOne(a,o,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}static defaults(e){return t.minimatch.defaults(e).Minimatch}}t.Minimatch=z;var D=n(4820);Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return D.escape}});var I=n(4023);Object.defineProperty(t,"unescape",{enumerable:!0,get:function(){return I.unescape}}),t.minimatch.Minimatch=z,t.minimatch.escape=a.escape,t.minimatch.unescape=l.unescape},4023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unescape=void 0,t.unescape=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=n(1023),i=n(9496),r=n(5645),o=n(6194),a=i.workspace.getConfiguration("stlite"),l=a.get("targetFiles"),c=a.get("ignoreFiles"),h="string"==typeof l?l:"**/*",p="string"==typeof c?c:void 0,u=p?new o.default.Minimatch(p):void 0,f="requirements.txt";console.log("stlite configs",{fileWatcherPattern:h,fileWatcherIgnorePattern:p,requirementsTxtPath:f}),e.activate=function(e){let n;console.log('"vscode-stlite" is now active in the web extension host.');let s=new r.PromiseDelegate;e.subscriptions.push(i.commands.registerCommand("stlite.start",(()=>{n?n.reveal():(n=i.window.createWebviewPanel("stlite","stlite preview",i.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0}),n.onDidDispose((()=>{n=void 0}),void 0,e.subscriptions),s=new r.PromiseDelegate,n.webview.html=`<!DOCTYPE html>\n  <html>\n    <head>\n      <meta charset="UTF-8" />\n      <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n      <meta\n        name="viewport"\n        content="width=device-width, initial-scale=1, shrink-to-fit=no"\n      />\n      <title>stlite app</title>\n      <link\n        rel="stylesheet"\n        href="https://cdn.jsdelivr.net/npm/@stlite/mountable@${"0.60.2"}/build/stlite.css"\n      />\n    </head>\n    <body>\n      <div id="root"></div>\n      <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.60.2/build/stlite.js"><\/script>\n      <script>\n        const vscode = acquireVsCodeApi();\n\n        // Streamlit's withHostCommunication accesses window.parent.postMessage, which is not available in the webview, so we need to mock it.\n        window.parent = {\n          postMessage: (msg) => {\n            vscode.postMessage(msg);\n          }\n        };\n\n        let stliteCtx = null;\n\n        window.addEventListener('message', event => {\n          console.debug("event.data:", event.data);\n\n          const message = event.data;\n\n          switch (message.type) {\n            case 'init': {\n              const { mountOptions } = message.data;\n              stliteCtx = stlite.mount(mountOptions, document.getElementById("root"));\n              vscode.postMessage({\n                type: "init:done",\n              });\n              break;\n            }\n            case 'file:write': {\n              const { path, content } = message.data;\n              stliteCtx.writeFile(path, content);\n              break;\n            }\n            case 'file:delete': {\n              const { path } = message.data;\n              stliteCtx.unlink(path);\n              break;\n            }\n            case 'install': {\n              const { requirements } = message.data;\n              stliteCtx.install(requirements);\n              break;\n            }\n          }\n        });\n      <\/script>\n    </body>\n  </html>`,n.webview.onDidReceiveMessage((e=>{switch(console.debug("Received message from webview:",e),e.type){case"init:done":return void s.resolve();case"GUEST_READY":return void n?.webview.postMessage({stCommVersion:1,type:"SET_PAGE_LINK_BASE_URL",pageLinkBaseUrl:"vscode-webview://stlite"})}}),void 0,e.subscriptions),i.workspace.findFiles(h,p,1e3).then((async e=>{const o={},a=[];await Promise.all(e.map((async e=>{const n=i.workspace.getWorkspaceFolder(e);if(!n)return;const s=t.relative(n.uri.fsPath,e.fsPath),r=await i.workspace.fs.readFile(e);o[s]=r,s.endsWith(".py")&&a.push({relPath:s,label:s})})));const l=f in o?(0,r.parseRequirementsTxt)((new TextDecoder).decode(o[f])):[],c=a.sort(((e,n)=>{const s=e.relPath.split(t.sep),i=n.relPath.split(t.sep);if(s.length!==i.length)return s.length-i.length;const r=s[s.length-1],o=i[i.length-1];return r.localeCompare(o)})),h=await i.window.showQuickPick(c,{canPickMany:!1,placeHolder:"Select the entrypoint file"}).then((e=>e?.relPath));null!=h?async function(e){console.debug("[stlite] Initialize: "+e),null!=n?(n.webview.postMessage({type:"init",data:{mountOptions:e}}),await s.promise,console.debug("[stlite] Initialization request completed")):console.warn("[stlite] Panel has not been created.")}({requirements:l,entrypoint:h,files:o,hostConfig:{allowedOrigins:["vscode-webview://*","https://*.vscode-cdn.net"],useExternalAuthToken:!1}}):n?.dispose()})))})));const o=i.workspace.createFileSystemWatcher(h);async function a(e){if(console.debug("[stlite] Write file: "+e.fsPath),null==n)return;if(u?.match(e.fsPath))return;const s=i.workspace.getWorkspaceFolder(e);if(!s)return;const o=t.relative(s.uri.fsPath,e.fsPath),a=await i.workspace.fs.readFile(e);if(console.debug("[stlite] RelPath: "+o),o!==f)n.webview.postMessage({type:"file:write",data:{path:o,content:a}});else{const e=(0,r.parseRequirementsTxt)((new TextDecoder).decode(a));n.webview.postMessage({type:"install",data:{requirements:e}})}}e.subscriptions.push(o),o.onDidCreate(a,void 0,e.subscriptions),o.onDidChange(a,void 0,e.subscriptions),o.onDidDelete((function(e){if(console.debug("[stlite] Delete file: "+e.fsPath),null==n)return;if(u?.match(e.fsPath))return;const s=i.workspace.getWorkspaceFolder(e);if(!s)return;const r=t.relative(s.uri.fsPath,e.fsPath);console.debug("[stlite]  RelPath: "+r),n.webview.postMessage({type:"file:delete",data:{path:r}})}),void 0,e.subscriptions)},e.deactivate=function(){}})();var i=exports;for(var r in s)i[r]=s[r];s.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();